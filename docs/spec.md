# Spec - 规范层

> 本文档定义产品的 **What**，明确功能边界和验收标准，不涉及技术实现。

## 版本
v0.2.0

---

## 1. 功能列表

### 核心功能

| 功能模块 | 功能点 | 优先级 | 状态 |
|----------|--------|--------|------|
| 首页 | 展示最新文章列表 | P0 | ✅ 已完成 |
| 首页 | 列表分页 | P1 | ✅ 已完成 |
| 文章 | 文章详情页渲染 | P0 | ✅ 已完成 |
| 文章 | Markdown 渲染（含代码高亮） | P0 | ✅ 已完成 |
| 文章 | 文章目录（TOC） | P1 | ✅ 已完成 |
| 文章 | 上一篇/下一篇（系列内） | P1 | ✅ 已完成 |
| 文章 | 相关文章推荐 | P2 | ✅ 已完成 |
| 导航 | 分类/标签页面 | P1 | ✅ 已完成 |
| 导航 | 移动端菜单 | P1 | ✅ 已完成 |
| SEO | Meta 标签优化 | P0 | ✅ 已完成 |
| SEO | Sitemap 生成 | P1 | ✅ 已完成 |
| 主题 | 暗黑模式 | P1 | ✅ 已完成 |

### 功能扩展预留

> 以下功能暂不实现，但需要在设计时预留扩展空间。

- [ ] 文章搜索
- [x] RSS 订阅
- [x] 暗色模式切换
- [ ] 第三方评论系统集成（如 Giscus）

---

## 2. 用户旅程

### 旅程 1：读者浏览博客

```
访问首页 → 浏览文章列表 → 点击感兴趣的文章 → 阅读文章内容 → （可选）通过分类/标签发现更多内容
```

**关键触点：**
- 首页加载速度 < 2s
- 文章列表需展示：标题、摘要、发布日期、分类标签
- 文章详情页需展示：标题、正文、目录、发布日期、分类标签

### 旅程 2：作者发布文章

```
创建 .md 文件 → 编写 Frontmatter 元信息 → 编写文章正文 → 保存文件 → 触发构建/部署 → 文章上线
```

**关键触点：**
- Frontmatter 需支持：title、date、category、tags、description
- 支持草稿模式（draft: true 不发布）

---

## 3. 验收标准

### 功能验收

#### F-001：首页文章列表
- [x] 按发布时间倒序展示文章
- [x] 每篇文章显示标题、摘要（前 150 字或 description）、日期
- [x] 支持分页（每页 10 篇）
- [x] 草稿文章不显示

#### F-002：文章详情页
- [x] 正确渲染 Markdown 内容
- [x] 代码块有语法高亮
- [x] 显示文章目录（H2/H3 级别）
- [x] 显示文章元信息（日期、分类、标签）
- [x] 上一篇/下一篇导航（系列文章内）
- [x] 相关文章推荐（基于标签）

#### F-003：分类与标签
- [x] 分类页面展示该分类下所有文章
- [x] 标签页面展示该标签下所有文章
- [x] 分类/标签页支持分页

---

## 4. 非功能需求

### 性能要求
| 指标 | 目标值 | 测量方式 |
|------|--------|----------|
| 首页 LCP | < 2.5s | Lighthouse |
| 首页 FCP | < 1.5s | Lighthouse |
| 文章页 TTI | < 3s | Lighthouse |
| 整体性能评分 | > 90 | Lighthouse |

### SEO 要求
- [ ] 所有页面有唯一的 title 和 description
- [ ] 结构化数据（JSON-LD）
- [ ] 自动生成 sitemap.xml
- [ ] 自动生成 robots.txt
- [ ] Open Graph 标签支持

### 可访问性要求
- [ ] 语义化 HTML 结构
- [ ] 图片有 alt 属性
- [ ] 键盘可导航
- [ ] 颜色对比度符合 WCAG AA 标准

### 兼容性要求
- [ ] 支持主流现代浏览器（Chrome、Firefox、Safari、Edge）
- [ ] 响应式设计（移动端、平板、桌面端）
- [ ] 无 JavaScript 时核心内容可访问

### 视觉设计要求
- [ ] 选用适合阅读的中文字体
- [ ] 中文正文字体需清晰易读、适合长文阅读
- [ ] 代码字体需等宽、区分易混淆字符（如 0/O、1/l）
- [ ] 字体加载不阻塞首屏渲染

---

## 5. 内容规范

### Frontmatter 字段定义

```yaml
---
title: "文章标题"          # 必填，字符串
date: 2024-01-01           # 必填，日期格式 YYYY-MM-DD
category: "技术"           # 必填，单选
tags: ["Astro", "博客"]    # 可选，数组
description: "文章描述"    # 可选，用于 SEO 和摘要
draft: false               # 可选，默认 false
cover: "/images/cover.jpg" # 可选，封面图
---
```

### 分类体系（示例）

- 技术
- 生活
- 随笔

---

## 更新日志

| 日期 | 版本 | 变更内容 |
|------|------|----------|
| 2024-12-25 | v0.2.0 | 更新功能状态，新增分页需求 |
| 2024-12-24 | v0.0.1 | 初始版本 |

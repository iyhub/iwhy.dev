---
interface Props {
	title: string;
	description?: string;
	date: Date;
	categorySlug: string;
	categoryName: string;
	tags?: string[];
	slug: string;
}

const { title, description, date, categorySlug, categoryName, tags, slug } = Astro.props;

const formattedDate = date.toLocaleDateString('zh-CN', {
	year: 'numeric',
	month: 'long',
	day: 'numeric',
});
---

<article class="post-card">
	<a href={`/posts/${slug}`} class="post-link">
		<h3 class="post-title" transition:name={`post-title-${slug}`}>{title}</h3>
	</a>
	<div class="post-meta">
		<time datetime={date.toISOString()}>{formattedDate}</time>
		<span class="separator">Â·</span>
		<a href={`/categories/${categorySlug}/page/1`} class="category">{categoryName}</a>
	</div>
	{description && <p class="post-description">{description}</p>}
	{tags && tags.length > 0 && (
		<div class="post-tags text-sm">
			{tags.map(tag => (
				<a href={`/tags/${tag}/page/1`} class="tag">{tag}</a>
			))}
		</div>
	)}
</article>

<style>
	.post-card {
		padding: 1.5em 0;
		border-bottom: 2px dotted rgba(var(--gray-light), 0.6);
	}

	.post-card:last-child {
		border-bottom: none;
	}

	.post-title {
		font-size: 1.35em;
		font-weight: 600;
		margin: 0 0 0.5em 0;
		line-height: 1.4;
		letter-spacing: -0.01em;
	}

	.post-link {
		text-decoration: none;
		color: rgb(var(--black));
	}

	.post-link:hover .post-title {
		color: var(--accent);
	}

	.post-meta {
		display: flex;
		align-items: center;
		gap: 0.5em;
		color: rgb(var(--gray));
		font-size: 0.875em;
		margin-bottom: 0.75em;
	}

	.separator {
		color: rgba(var(--gray), 0.4);
	}

	.category {
		color: var(--accent);
		text-decoration: none;
		transition: opacity 0.2s;
	}

	.category:hover {
		opacity: 0.7;
	}

	.post-description {
		color: rgb(var(--black));
		margin: 0;
		line-height: 1.6;
		opacity: 0.85;
	}

	.post-tags {
		display: flex;
		flex-wrap: wrap;
		gap: 0.5em;
		margin-top: 0.5em;
	}

	.tag {
		font-size: 0.8em;
		padding: 0.25em 0.75em;
		background: rgba(var(--gray-light), 0.6);
		border-radius: 1em;
		color: rgb(var(--gray-dark));
		text-decoration: none;
		transition: all 0.2s;
	}

	.tag:hover {
		background: var(--accent);
		color: white;
	}
</style>
